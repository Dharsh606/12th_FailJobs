<!-- Global Language Selector Component -->
<div class="language-selector" id="languageSelector">
  <div class="language-current" onclick="toggleLanguageDropdown()">
    <span class="language-flag" id="currentLangFlag">ğŸ‡¬ğŸ‡§</span>
    <span class="language-name" id="currentLangName">English</span>
    <span class="language-arrow">â–¼</span>
  </div>
  
  <div class="language-dropdown" id="languageDropdown" style="display: none;">
    <div class="language-options">
      <div class="language-option" data-lang="en" onclick="changeLanguage('en')">
        <span class="flag">ğŸ‡¬ğŸ‡§</span>
        <span class="name">English</span>
      </div>
      <div class="language-option" data-lang="hi" onclick="changeLanguage('hi')">
        <span class="flag">ğŸ‡®ğŸ‡³</span>
        <span class="name">à¤¹à¤¿à¤‚à¤¦à¥€</span>
      </div>
      <div class="language-option" data-lang="ta" onclick="changeLanguage('ta')">
        <span class="flag">ğŸ‡±ğŸ‡°</span>
        <span class="name">à®¤à®®à®¿à®´à¯</span>
      </div>
      <div class="language-option" data-lang="te" onclick="changeLanguage('te')">
        <span class="flag">ğŸ‡®ğŸ‡³</span>
        <span class="name">à°¤à±†à°²à±à°—à±</span>
      </div>
      <div class="language-option" data-lang="ml" onclick="changeLanguage('ml')">
        <span class="flag">ğŸ‡®ğŸ‡³</span>
        <span class="name">à´®à´²à´¯à´¾à´³à´‚</span>
      </div>
      <div class="language-option" data-lang="kn" onclick="changeLanguage('kn')">
        <span class="flag">ğŸ‡®ğŸ‡³</span>
        <span class="name">à²•à²¨à³à²¨à²¡</span>
      </div>
      <div class="language-option" data-lang="bn" onclick="changeLanguage('bn')">
        <span class="flag">ğŸ‡§ğŸ‡©</span>
        <span class="name">à¦¬à¦¾à¦‚à¦²à¦¾</span>
      </div>
      <div class="language-option" data-lang="mr" onclick="changeLanguage('mr')">
        <span class="flag">ğŸ‡®ğŸ‡³</span>
        <span class="name">à¤®à¤°à¤¾à¤ à¥€</span>
      </div>
      <div class="language-option" data-lang="gu" onclick="changeLanguage('gu')">
        <span class="flag">ğŸ‡®ğŸ‡³</span>
        <span class="name">àª—à«àªœàª°àª¾àª¤à«€</span>
      </div>
      <div class="language-option" data-lang="pa" onclick="changeLanguage('pa')">
        <span class="flag">ğŸ‡®ğŸ‡³</span>
        <span class="name">à¨ªà©°à¨œà¨¾à¨¬à©€</span>
      </div>
      <div class="language-option" data-lang="or" onclick="changeLanguage('or')">
        <span class="flag">ğŸ‡®ğŸ‡³</span>
        <span class="name">à¬“à¬¡à¬¼à¬¿à¬†</span>
      </div>
      <div class="language-option" data-lang="as" onclick="changeLanguage('as')">
        <span class="flag">ğŸ‡®ğŸ‡³</span>
        <span class="name">à¦…à¦¸à¦®à§€à¦¯à¦¼à¦¾</span>
      </div>
    </div>
  </div>
</div>

<style>
.language-selector {
  position: relative;
  display: inline-block;
}

.language-current {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  background: var(--glass-bg);
  border: 1px solid var(--glass-border);
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.3s ease;
}

.language-current:hover {
  background: var(--accent-orange);
  color: white;
}

.language-flag {
  font-size: 18px;
}

.language-name {
  font-weight: 500;
}

.language-arrow {
  font-size: 12px;
  transition: transform 0.3s ease;
}

.language-selector:hover .language-arrow {
  transform: rotate(180deg);
}

.language-dropdown {
  position: absolute;
  top: 100%;
  left: 0;
  right: 0;
  background: white;
  border: 1px solid var(--glass-border);
  border-radius: 8px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
  z-index: 1000;
  min-width: 200px;
  max-height: 300px;
  overflow-y: auto;
}

.language-options {
  padding: 8px 0;
}

.language-option {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 16px;
  cursor: pointer;
  transition: background-color 0.2s ease;
  border-bottom: 1px solid transparent;
}

.language-option:hover {
  background: var(--glass-bg);
}

.language-option:last-child {
  border-bottom: none;
}

.language-option .flag {
  font-size: 20px;
}

.language-option .name {
  font-weight: 500;
}

/* Mobile responsive */
@media (max-width: 768px) {
  .language-dropdown {
    right: -50px;
    transform: translateX(50%);
  }
  
  .language-option {
    padding: 10px 12px;
  }
  
  .language-option .name {
    font-size: 14px;
  }
}
</style>

<script>
// Global language selector functionality
function toggleLanguageDropdown() {
  const dropdown = document.getElementById('languageDropdown');
  const isVisible = dropdown.style.display !== 'none';
  
  // Close all other dropdowns
  document.querySelectorAll('.language-dropdown').forEach(d => {
    if (d !== dropdown) d.style.display = 'none';
  });
  
  dropdown.style.display = isVisible ? 'none' : 'block';
}

function changeLanguage(lang) {
  // Use the enhanced language system
  if (typeof setLang === 'function') {
    setLang(lang);
  } else {
    // Fallback for pages without enhanced system
    localStorage.setItem('failjob_lang', lang);
    location.reload();
  }
}

// Update current language display
function updateCurrentLanguageDisplay() {
  const currentLang = getLang ? getLang() : 'en';
  const flagElement = document.getElementById('currentLangFlag');
  const nameElement = document.getElementById('currentLangName');
  
  const langInfo = {
    'en': { flag: 'ğŸ‡¬ğŸ‡§', name: 'English' },
    'hi': { flag: 'ğŸ‡®ğŸ‡³', name: 'à¤¹à¤¿à¤‚à¤¦à¥€' },
    'ta': { flag: 'ğŸ‡±ğŸ‡°', name: 'à®¤à®®à®¿à®´à¯' },
    'te': { flag: 'ğŸ‡®ğŸ‡³', name: 'à°¤à±†à°²à±à°—à±' },
    'ml': { flag: 'ğŸ‡®ğŸ‡³', name: 'à´®à´²à´¯à´¾à´³à´‚' },
    'kn': { flag: 'ğŸ‡®ğŸ‡³', name: 'à²•à²¨à³à²¨à²¡' },
    'bn': { flag: 'ğŸ‡§ğŸ‡©', name: 'à¦¬à¦¾à¦‚à¦²à¦¾' },
    'mr': { flag: 'ğŸ‡®ğŸ‡³', name: 'à¤®à¤°à¤¾à¤ à¥€' },
    'gu': { flag: 'ğŸ‡®ğŸ‡³', name: 'àª—à«àªœàª°àª¾àª¤à«€' },
    'pa': { flag: 'ğŸ‡®ğŸ‡³', name: 'à¨ªà©°à¨œà¨¾à¨¬à©€' },
    'or': { flag: 'ğŸ‡®ğŸ‡³', name: 'à¬“à¬¡à¬¼à¬¿à¬†' },
    'as': { flag: 'ğŸ‡®ğŸ‡³', name: 'à¦…à¦¸à¦®à§€à¦¯à¦¼à¦¾' }
  };
  
  const info = langInfo[currentLang] || langInfo['en'];
  
  if (flagElement) flagElement.textContent = info.flag;
  if (nameElement) nameElement.textContent = info.name;
}

// Close dropdown when clicking outside
document.addEventListener('click', function(event) {
  if (!event.target.closest('.language-selector')) {
    document.querySelectorAll('.language-dropdown').forEach(d => {
      d.style.display = 'none';
    });
  }
});

// Initialize on page load
document.addEventListener('DOMContentLoaded', function() {
  updateCurrentLanguageDisplay();
});
</script>
